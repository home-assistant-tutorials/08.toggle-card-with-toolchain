{"mappings":";;;;AEAA,4BAAiB;;ADAjB;;AEAA,4BAAiB;;;AFGV,MAAM,kDAAgC;IACzC,qBAAqB;IACrB,QAAQ;IACR,MAAM;IACN,YAAY,CAAC,EAAE;IAEf,YAAY;IACZ,aAAc;QACV,KAAK;QACL,IAAI,CAAC,MAAM;QACX,IAAI,CAAC,OAAO;QACZ,IAAI,CAAC,QAAQ;QACb,IAAI,CAAC,eAAe;QACpB,IAAI,CAAC,QAAQ;IACjB;IAEA,UAAU,MAAM,EAAE;QACd,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,aAAa;QAClB,IAAI,CAAC,cAAc;IACvB;IAEA,IAAI,KAAK,IAAI,EAAE;QACX,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,YAAY;IACrB;IAEA,YAAY;QACR,IAAI,CAAC,QAAQ;IACjB;IAEA,YAAY;IACZ,QAAQ;QACJ,OAAO,IAAI,CAAC,QAAQ,GAAG,KAAK,KAAK;IACrC;IAEA,OAAO;QACH,OAAO,IAAI,CAAC,QAAQ,GAAG,KAAK,KAAK;IACrC;IAEA,YAAY;QACR,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM;IAC9B;IAEA,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM;IAC9B;IAEA,WAAW;QACP,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,GAAG;IAChD;IAEA,gBAAgB;QACZ,OAAO,IAAI,CAAC,QAAQ,GAAG,UAAU;IACrC;IAEA,UAAU;QACN,MAAM,eAAe,IAAI,CAAC,aAAa,GAAG,aAAa;QACvD,OAAO,eAAe,eAAe,IAAI,CAAC,WAAW,EAAE;IAC3D;IAEA,OAAO;IACP,gBAAgB;QACZ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EACpB,MAAM,IAAI,MAAM,4BAA4B;IAEpD;IAEA,SAAS;QACL,MAAM,YAAY,SAAS,aAAa,CAAC;QACzC,UAAU,SAAS,GAAG,CAAA,GAAA,gEAAI,AAAD;QACzB,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,iBAAiB;IACrD;IAEA,UAAU;QACN,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,aAAa,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG,CAAA,GAAA,wDAAG,QAAD;IACzC;IAEA,WAAW;QACP,IAAI,CAAC,YAAY,CAAC;YAAE,MAAM;QAAO;QACjC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI;IACpE;IAEA,kBAAkB;QACd,MAAM,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI;QAChC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,aAAa,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,KAAK,aAAa,CAAC;QACvC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,aAAa,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,aAAa,CAAC;QAC3C,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,aAAa,CAAC;IAC9C;IAEA,WAAW;QACP,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,gBAAgB,CAC9B,SACA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GACxB,KAAK;IAEb;IAEA,iBAAiB;QACb,IAAI,IAAI,CAAC,SAAS,IACd,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,IAAI,CAAC,SAAS;aAEzD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC;IAE5C;IAEA,eAAe;QACX,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI;YAClB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC;YAC1E,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;YACtC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC;QACpC,OAAO;YACH,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG;YACnC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO;YAC/C,IAAI,IAAI,CAAC,KAAK,IAAI;gBACd,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;gBACvC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC;YACxC,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI;gBACpB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;gBACvC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,GAAG,KAAK;YACxD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC;YACnC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC;QACvC,CAAC;IACL;IAEA,WAAW;QACP,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,iBAAiB,UAAU;YAC9C,WAAW,IAAI,CAAC,WAAW;QAC/B;IACJ;IAEA,qBAAqB;IACrB,OAAO,mBAAmB;QACtB,OAAO,SAAS,aAAa,CAAC;IAClC;IAEA,OAAO,gBAAgB;QACnB,OAAO;YACH,QAAQ;YACR,QAAQ;QACZ;IACJ;AACJ;;ADtJA;;AKAA,4BAAiB;;ADAjB;;AEAA,4BAAiB;;;AFGV,MAAM,kDAAsC;IAC/C,qBAAqB;IACrB,QAAQ;IACR,MAAM;IACN,YAAY,CAAC,EAAE;IAEf,YAAY;IACZ,aAAc;QACV,KAAK;QACL,IAAI,CAAC,MAAM;QACX,IAAI,CAAC,OAAO;QACZ,IAAI,CAAC,QAAQ;QACb,IAAI,CAAC,eAAe;QACpB,IAAI,CAAC,QAAQ;IACjB;IAEA,UAAU,MAAM,EAAE;QACd,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,cAAc;IACvB;IAEA,IAAI,KAAK,IAAI,EAAE;QACX,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,YAAY;IACrB;IAEA,UAAU,KAAK,EAAE;QACb,IAAI,CAAC,kBAAkB,CAAC;IAC5B;IAEA,OAAO;IACP,SAAS;QACL,MAAM,YAAY,SAAS,aAAa,CAAC;QACzC,UAAU,SAAS,GAAG,CAAA,GAAA,gEAAI,AAAD;QACzB,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,UAAU,iBAAiB;IACvD;IAEA,UAAU;QACN,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,aAAa,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,GAAG,CAAA,GAAA,yDAAG,OAAD;IACzC;IAEA,WAAW;QACP,IAAI,CAAC,YAAY,CAAC;YAAE,MAAM;QAAO;QACjC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;IACtE;IAEA,kBAAkB;QACd,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC;QAC5D,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC;IAChE;IAEA,WAAW;QACP,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAClC,YACA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI;QAE5B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAClC,YACA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI;IAEhC;IAEA,iBAAiB;QACb,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;QACjD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;IACrD;IAEA,eAAe,CAAE;IAEjB,mBAAmB,YAAY,EAAE;QAC7B,wCAAwC;QACxC,MAAM,YAAY,OAAO,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO;QAChD,IAAI,aAAa,MAAM,CAAC,EAAE,IAAI,UAC1B,UAAU,MAAM,GAAG,aAAa,MAAM,CAAC,KAAK;aACzC,IAAI,aAAa,MAAM,CAAC,EAAE,IAAI,UACjC,UAAU,MAAM,GAAG,aAAa,MAAM,CAAC,KAAK;QAEhD,MAAM,eAAe,IAAI,YAAY,kBAAkB;YACnD,QAAQ;gBAAE,QAAQ;YAAU;YAC5B,SAAS,IAAI;YACb,UAAU,IAAI;QAClB;QACA,IAAI,CAAC,aAAa,CAAC;IACvB;AACJ;;;AJrFA,eAAe,MAAM,CACjB,8BACA,CAAA,GAAA,yCAAuB,AAAD;AAE1B,eAAe,MAAM,CACjB,qCACA,CAAA,GAAA,yCAA6B,AAAD;AAGhC,OAAO,WAAW,GAAG,OAAO,WAAW,IAAI,EAAE;AAC7C,OAAO,WAAW,CAAC,IAAI,CAAC;IACpB,MAAM;IACN,MAAM;IACN,aAAa;AACjB","sources":["src/index.js","src/card.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-19059249e63538e6.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-531e6d78916bb52d.js","src/editor.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-85a46028a801572a.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-c341726f6de72a56.js"],"sourcesContent":["import { ToggleCardWithToolchain } from \"./card\";\nimport { ToggleCardWithToolchainEditor } from \"./editor\";\n\ncustomElements.define(\n    \"toggle-card-with-toolchain\",\n    ToggleCardWithToolchain\n);\ncustomElements.define(\n    \"toggle-card-with-toolchain-editor\",\n    ToggleCardWithToolchainEditor\n);\n\nwindow.customCards = window.customCards || [];\nwindow.customCards.push({\n    type: \"toggle-card-with-toolchain\",\n    name: \"toggle card created with a toolchain\",\n    description: \"Turn an entity on and off\",\n});\n","import html from \"bundle-text:./card.html\";\nimport css from \"bundle-text:./card.css\";\n\nexport class ToggleCardWithToolchain extends HTMLElement {\n    // private properties\n    _config;\n    _hass;\n    _elements = {};\n\n    // lifecycle\n    constructor() {\n        super();\n        this.doHtml();\n        this.doStyle();\n        this.doAttach();\n        this.doQueryElements();\n        this.doListen();\n    }\n\n    setConfig(config) {\n        this._config = config;\n        this.doCheckConfig();\n        this.doUpdateConfig();\n    }\n\n    set hass(hass) {\n        this._hass = hass;\n        this.doUpdateHass();\n    }\n\n    onClicked() {\n        this.doToggle();\n    }\n\n    // accessors\n    isOff() {\n        return this.getState().state === \"off\";\n    }\n\n    isOn() {\n        return this.getState().state === \"on\";\n    }\n\n    getHeader() {\n        return this._config.header;\n    }\n\n    getEntityID() {\n        return this._config.entity;\n    }\n\n    getState() {\n        return this._hass.states[this.getEntityID()];\n    }\n\n    getAttributes() {\n        return this.getState().attributes;\n    }\n\n    getName() {\n        const friendlyName = this.getAttributes().friendly_name;\n        return friendlyName ? friendlyName : this.getEntityID();\n    }\n\n    // jobs\n    doCheckConfig() {\n        if (!this._config.entity) {\n            throw new Error(\"Please define an entity!\");\n        }\n    }\n\n    doHtml() {\n        const importBox = document.createElement(\"div\");\n        importBox.innerHTML = html;\n        this._elements.card = importBox.firstElementChild;\n    }\n\n    doStyle() {\n        this._elements.style = document.createElement(\"style\");\n        this._elements.style.textContent = css;\n    }\n\n    doAttach() {\n        this.attachShadow({ mode: \"open\" });\n        this.shadowRoot.append(this._elements.style, this._elements.card);\n    }\n\n    doQueryElements() {\n        const card = this._elements.card;\n        this._elements.error = card.querySelector(\".error\");\n        this._elements.dl = card.querySelector(\".dl\");\n        this._elements.topic = card.querySelector(\".dt\");\n        this._elements.toggle = card.querySelector(\".toggle\");\n        this._elements.value = card.querySelector(\".value\");\n    }\n\n    doListen() {\n        this._elements.dl.addEventListener(\n            \"click\",\n            this.onClicked.bind(this),\n            false\n        );\n    }\n\n    doUpdateConfig() {\n        if (this.getHeader()) {\n            this._elements.card.setAttribute(\"header\", this.getHeader());\n        } else {\n            this._elements.card.removeAttribute(\"header\");\n        }\n    }\n\n    doUpdateHass() {\n        if (!this.getState()) {\n            this._elements.error.textContent = `${this.getEntityID()} is unavailable.`;\n            this._elements.error.classList.remove(\"hidden\");\n            this._elements.dl.classList.add(\"hidden\");\n        } else {\n            this._elements.error.textContent = \"\";\n            this._elements.topic.textContent = this.getName();\n            if (this.isOff()) {\n                this._elements.toggle.classList.remove(\"on\");\n                this._elements.toggle.classList.add(\"off\");\n            } else if (this.isOn()) {\n                this._elements.toggle.classList.remove(\"off\");\n                this._elements.toggle.classList.add(\"on\");\n            }\n            this._elements.value.textContent = this.getState().state;\n            this._elements.error.classList.add(\"hidden\");\n            this._elements.dl.classList.remove(\"hidden\");\n        }\n    }\n\n    doToggle() {\n        this._hass.callService(\"input_boolean\", \"toggle\", {\n            entity_id: this.getEntityID(),\n        });\n    }\n\n    // card configuration\n    static getConfigElement() {\n        return document.createElement(\"toggle-card-with-toolchain-editor\");\n    }\n\n    static getStubConfig() {\n        return {\n            entity: \"input_boolean.tcwt\",\n            header: \"TOP\",\n        };\n    }\n}\n","module.exports = \"792ba53d612bb711\";","module.exports = \"55c74441f404300e\";","import html from \"bundle-text:./editor.html\";\nimport css from \"bundle-text:./editor.css\";\n\nexport class ToggleCardWithToolchainEditor extends HTMLElement {\n    // private properties\n    _config;\n    _hass;\n    _elements = {};\n\n    // lifecycle\n    constructor() {\n        super();\n        this.doHtml();\n        this.doStyle();\n        this.doAttach();\n        this.doQueryElements();\n        this.doListen();\n    }\n\n    setConfig(config) {\n        this._config = config;\n        this.doUpdateConfig();\n    }\n\n    set hass(hass) {\n        this._hass = hass;\n        this.doUpdateHass();\n    }\n\n    onChanged(event) {\n        this.doMessageForUpdate(event);\n    }\n\n    // jobs\n    doHtml() {\n        const importBox = document.createElement(\"div\");\n        importBox.innerHTML = html;\n        this._elements.editor = importBox.firstElementChild;\n    }\n\n    doStyle() {\n        this._elements.style = document.createElement(\"style\");\n        this._elements.style.textContent = css;\n    }\n\n    doAttach() {\n        this.attachShadow({ mode: \"open\" });\n        this.shadowRoot.append(this._elements.style, this._elements.editor);\n    }\n\n    doQueryElements() {\n        this._elements.header = this._elements.editor.querySelector(\"#header\");\n        this._elements.entity = this._elements.editor.querySelector(\"#entity\");\n    }\n\n    doListen() {\n        this._elements.header.addEventListener(\n            \"focusout\",\n            this.onChanged.bind(this)\n        );\n        this._elements.entity.addEventListener(\n            \"focusout\",\n            this.onChanged.bind(this)\n        );\n    }\n\n    doUpdateConfig() {\n        this._elements.header.value = this._config.header;\n        this._elements.entity.value = this._config.entity;\n    }\n\n    doUpdateHass() { }\n\n    doMessageForUpdate(changedEvent) {\n        // this._config is readonly, copy needed\n        const newConfig = Object.assign({}, this._config);\n        if (changedEvent.target.id == \"header\") {\n            newConfig.header = changedEvent.target.value;\n        } else if (changedEvent.target.id == \"entity\") {\n            newConfig.entity = changedEvent.target.value;\n        }\n        const messageEvent = new CustomEvent(\"config-changed\", {\n            detail: { config: newConfig },\n            bubbles: true,\n            composed: true,\n        });\n        this.dispatchEvent(messageEvent);\n    }\n}","module.exports = \"1595dccfea46b70f\";","module.exports = \"8604f45cd7c30444\";"],"names":[],"version":3,"file":"card.js.map","sourceRoot":"../"}